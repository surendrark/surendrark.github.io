"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{3420:function(e,t,a){a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]])},8728:function(e,t,a){a.d(t,{Z:function(){return s}});let s=(0,a(9205).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},3954:function(e,t,a){a.d(t,{Q:function(){return m}});var s=a(7437),i=a(2265),l=a(521),r=a(9205);let n=(0,r.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),d=(0,r.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),o=(0,r.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),c=(0,r.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var h=a(8728);let x=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=a(5922);function m(){let e=(0,i.useRef)(null);(0,i.useRef)();let[t,a]=(0,i.useState)([]),[r,m]=(0,i.useState)([]),[u,p]=(0,i.useState)(null),[f,v]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),[j,k]=(0,i.useState)("nearest"),[N,w]=(0,i.useState)(!1),[S,R]=(0,i.useState)(100),[M,P]=(0,i.useState)(3),[I,C]=(0,i.useState)(.02),[D,A]=(0,i.useState)(!1),{theme:T}=(0,g.F)();(0,i.useEffect)(()=>{A(!0)},[]),(0,i.useEffect)(()=>{a([{id:"depot",x:400,y:300,demand:0,isDepot:!0,visited:!1}]),m(Array.from({length:M},(e,t)=>({id:"vehicle-".concat(t+1),capacity:S,currentLoad:0,route:["depot"],color:"hsl(".concat(120*t,", 70%, 50%)"),currentPosition:{x:400,y:300},currentRouteIndex:0,isMoving:!1,progress:0})))},[S,M]);let E=s=>{let i,l;if(f)return;let r=e.current;if(!r)return;let n=r.getBoundingClientRect();if("touches"in s){s.preventDefault();let e=s.touches[0]||s.changedTouches[0];i=e.clientX-n.left,l=e.clientY-n.top}else i=s.clientX-n.left,l=s.clientY-n.top;let d=r.width/n.width,o=r.height/n.height;i*=d,l*=o;let c={id:"node-".concat(t.length),x:i,y:l,demand:Math.floor(30*Math.random())+10,isDepot:!1,visited:!1};a(e=>[...e,c])},V=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),z=(e,t)=>{let a=e.filter(e=>!e.isDepot).map(e=>e.id),s=[],i=0;return t.forEach(t=>{let l=["depot"],r=e.find(e=>e.isDepot),n=0;for(;a.length>0;){let s=null,d=1/0;if(a.forEach(a=>{let i=e.find(e=>e.id===a);if(n+i.demand<=t.capacity){let e=V(r,i);e<d&&(d=e,s=i)}}),s)l.push(s.id),n+=s.demand,r=s,a.splice(a.indexOf(s.id),1),i+=d;else break}l.push("depot");let d=V(r,e.find(e=>e.isDepot));i+=d,s.push({vehicleId:t.id,path:l,distance:i})}),{totalDistance:i,vehicles:t,routes:s}},Z=(e,t)=>{let a=e.find(e=>e.isDepot),s=e.filter(e=>!e.isDepot),i=[],l=0,r=[];for(let e=0;e<s.length;e++)for(let t=e+1;t<s.length;t++){let i=s[e],l=s[t],n=V(a,i)+V(a,l)-V(i,l);r.push({i:i,j:l,saving:n})}r.sort((e,t)=>t.saving-e.saving),s.map(e=>[a.id,e.id,a.id]),s.map(e=>e.demand);let n=new Set,d=0;for(let{i:e,j:s,saving:o}of r){if(d>=t.length)break;if(!(n.has(e.id)||n.has(s.id))&&e.demand+s.demand<=t[d].capacity){let r=[a.id,e.id,s.id,a.id],o=V(a,e)+V(e,s)+V(s,a);i.push({vehicleId:t[d].id,path:r,distance:o}),l+=o,n.add(e.id),n.add(s.id),d++}}return s.forEach(e=>{if(!n.has(e.id)&&d<t.length){let s=2*V(a,e);i.push({vehicleId:t[d].id,path:[a.id,e.id,a.id],distance:s}),l+=s,d++}}),{totalDistance:l,vehicles:t,routes:i}},q=(e,t)=>{let a=e.find(e=>e.isDepot),s=e.filter(e=>!e.isDepot),i=[],l=0,r=s.map(e=>{let t=Math.atan2(e.y-a.y,e.x-a.x);return{...e,angle:t>=0?t:t+2*Math.PI}});r.sort((e,t)=>e.angle-t.angle);let n=0,d=[a.id],o=0,c=0,h=a;for(let e of r){if(n>=t.length)break;o+e.demand<=t[n].capacity?(d.push(e.id),c+=V(h,e),o+=e.demand,h=e):(d.push(a.id),c+=V(h,a),i.push({vehicleId:t[n].id,path:[...d],distance:c}),l+=c,++n<t.length&&(d=[a.id,e.id],o=e.demand,c=V(a,e),h=e))}return o>0&&n<t.length&&(d.push(a.id),c+=V(h,a),i.push({vehicleId:t[n].id,path:d,distance:c}),l+=c),{totalDistance:l,vehicles:t,routes:i}},F=e=>{let a=t.find(t=>t.id===e);return a?{x:a.x,y:a.y}:{x:0,y:0}},L=(e,t,a)=>e+(t-e)*a,W=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,_=()=>{u&&y&&m(e=>e.map((e,t)=>{let a=u.routes[t];if(!a||a.path.length<2)return e;let s={...e};if(s.isMoving&&(s.progress+=I,s.progress>=1&&(s.currentRouteIndex++,s.progress=0,s.currentRouteIndex>=a.path.length-1&&(s.currentRouteIndex=0,s.isMoving=!1,s.currentPosition=F("depot"))),s.isMoving&&s.currentRouteIndex<a.path.length-1)){let e=F(a.path[s.currentRouteIndex]),t=F(a.path[s.currentRouteIndex+1]),i=W(s.progress);s.currentPosition={x:L(e.x,t.x,i),y:L(e.y,t.y,i)}}return s}))};return(0,i.useEffect)(()=>{if(y){let e=setInterval(_,16);return()=>clearInterval(e)}},[y,u,I]),(0,i.useEffect)(()=>{let a=e.current;if(!a||!D)return;let s=a.getContext("2d");if(!s)return;let i=T||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");s.clearRect(0,0,a.width,a.height),s.strokeStyle="#f0f0f0",s.lineWidth=1;for(let e=0;e<a.width;e+=40)s.beginPath(),s.moveTo(e,0),s.lineTo(e,a.height),s.stroke();for(let e=0;e<a.height;e+=40)s.beginPath(),s.moveTo(0,e),s.lineTo(a.width,e),s.stroke();u&&u.routes.forEach((e,a)=>{if(e.path.length>1){var i;s.strokeStyle=(null===(i=r[a])||void 0===i?void 0:i.color)||"#000",s.lineWidth=3,s.beginPath();for(let a=0;a<e.path.length-1;a++){let i=t.find(t=>t.id===e.path[a]),l=t.find(t=>t.id===e.path[a+1]);i&&l&&(0===a&&s.moveTo(i.x,i.y),s.lineTo(l.x,l.y))}s.stroke()}}),t.forEach(e=>{e.isDepot?(s.fillStyle="#2563eb",s.fillRect(e.x-12,e.y-12,24,24),s.fillStyle="#ffffff",s.font="12px Arial",s.textAlign="center",s.fillText("D",e.x,e.y+4)):(s.fillStyle="#dc2626",s.beginPath(),s.arc(e.x,e.y,8,0,2*Math.PI),s.fill(),s.fillStyle="dark"===i?"#ffffff":"#000000",s.font="10px Arial",s.textAlign="center",s.fillText(e.demand.toString(),e.x,e.y-12))}),u&&y&&r.forEach((e,t)=>{if(e.isMoving||400!==e.currentPosition.x||300!==e.currentPosition.y){var a;let{x:l,y:r}=e.currentPosition;s.fillStyle=e.color,s.strokeStyle="#ffffff",s.lineWidth=2;let n=0;if(e.isMoving&&e.currentRouteIndex<(null===(a=u.routes[t])||void 0===a?void 0:a.path.length)-1){let a=u.routes[t],s=F(a.path[e.currentRouteIndex]),i=F(a.path[e.currentRouteIndex+1]);n=Math.atan2(i.y-s.y,i.x-s.x)}s.save(),s.translate(l,r),s.rotate(n),s.beginPath(),s.moveTo(12,0),s.lineTo(-8,-6),s.lineTo(-8,6),s.closePath(),s.fill(),s.stroke(),s.restore(),s.fillStyle="dark"===i?"#ffffff":"#000000",s.font="10px Arial",s.textAlign="center",s.fillText(e.id.split("-")[1],l,r-15)}})},[t,u,r,y,T,D]),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,s.jsxs)("button",{onClick:()=>{t.length<2||(v(!0),b(!1),setTimeout(()=>{let e;switch(j){case"nearest":default:e=z(t,r);break;case"savings":e=Z(t,r);break;case"sweep":e=q(t,r)}p(e),v(!1)},1500))},disabled:f||t.length<2,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base","aria-label":f?"Solving VRP problem...":"Solve Vehicle Routing Problem",children:[f?(0,s.jsx)(n,{size:16}):(0,s.jsx)(d,{size:16}),(0,s.jsx)("span",{className:"hidden xs:inline",children:f?"Solving...":"Solve VRP"}),(0,s.jsx)("span",{className:"xs:hidden",children:f?"...":"Solve"})]}),(0,s.jsxs)("button",{onClick:()=>{a(t.filter(e=>e.isDepot)),p(null),v(!1),b(!1),m(Array.from({length:M},(e,t)=>({id:"vehicle-".concat(t+1),capacity:S,currentLoad:0,route:["depot"],color:"hsl(".concat(120*t,", 70%, 50%)"),currentPosition:{x:400,y:300},currentRouteIndex:0,isMoving:!1,progress:0})))},className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm sm:text-base","aria-label":"Reset VRP demo",children:[(0,s.jsx)(o,{size:16}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Reset"})]}),u&&(0,s.jsxs)("button",{onClick:()=>{u&&(y?b(!1):(m(e=>e.map((e,t)=>({...e,currentPosition:F("depot"),currentRouteIndex:0,isMoving:!0,progress:0}))),b(!0)))},disabled:!u,className:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-white font-medium transition-colors text-sm sm:text-base ".concat(y?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"," disabled:opacity-50 disabled:cursor-not-allowed"),"aria-label":y?"Stop route animation":"Start route animation",children:[y?(0,s.jsx)(c,{size:16}):(0,s.jsx)(d,{size:16}),(0,s.jsx)("span",{className:"hidden sm:inline",children:y?"Stop Animation":"Start Animation"}),(0,s.jsx)("span",{className:"sm:hidden hidden xs:inline",children:y?"Stop":"Animate"}),(0,s.jsx)("span",{className:"xs:hidden",children:y?"Stop":"Play"})]}),(0,s.jsxs)("button",{onClick:()=>w(!N),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 text-sm sm:text-base","aria-label":N?"Hide VRP settings":"Show VRP settings",children:[(0,s.jsx)(h.Z,{size:16}),(0,s.jsx)("span",{className:"hidden xs:inline",children:"Settings"})]})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,s.jsx)("label",{htmlFor:"algorithm-selector",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Algorithm:"}),(0,s.jsxs)("select",{id:"algorithm-selector",value:j,onChange:e=>k(e.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 text-sm flex-1 sm:flex-none min-w-0","aria-label":"Select VRP solving algorithm",children:[(0,s.jsx)("option",{value:"nearest",children:"Nearest Neighbor"}),(0,s.jsx)("option",{value:"savings",children:"Savings Algorithm"}),(0,s.jsx)("option",{value:"sweep",children:"Sweep Algorithm"})]})]})]}),N&&(0,s.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Capacity"}),(0,s.jsx)("input",{type:"number",value:S,onChange:e=>R(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",min:"50",max:"200"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Number of Vehicles"}),(0,s.jsx)("input",{type:"number",value:M,onChange:e=>P(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",min:"1",max:"5"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Animation Speed"}),(0,s.jsx)("input",{type:"range",value:1e3*I,onChange:e=>C(Number(e.target.value)/1e3),className:"w-full",min:"5",max:"50",step:"1"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(1e3*I).toFixed(0),"x speed"]})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Network Visualization"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsx)(x,{size:16}),"Click to add customer nodes (random demand assigned)"]})]}),(0,s.jsx)("canvas",{ref:e,width:800,height:600,onClick:E,onTouchEnd:E,className:"border border-gray-300 dark:border-gray-600 rounded-lg cursor-crosshair w-full",style:{maxWidth:"100%",height:"auto",touchAction:"manipulation"}})]}),u&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Solution Results"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:u.totalDistance.toFixed(0)}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Distance"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.routes.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Vehicles"})]}),(0,s.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.length-1}),(0,s.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customers Served"})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:u.routes.map((e,t)=>{var a;return(0,s.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,s.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:null===(a=r[t])||void 0===a?void 0:a.color}}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:e.vehicleId}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Route: ",e.path.join(" → ")]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"font-medium",children:[e.distance.toFixed(0)," units"]}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Distance"})]})]},e.vehicleId)})})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Legend"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded"}),(0,s.jsx)("span",{children:"Depot (Distribution Center)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-red-600 rounded-full"}),(0,s.jsx)("span",{children:"Customer (demand shown on top)"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"w-6 h-1 bg-green-500"}),(0,s.jsx)("span",{children:"Vehicle Route"})]})]})]})]})}}}]);