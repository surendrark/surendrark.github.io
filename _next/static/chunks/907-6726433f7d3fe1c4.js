"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{3420:function(e,t,s){s.d(t,{Z:function(){return a}});let a=(0,s(9205).Z)("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]])},1146:function(e,t,s){s.d(t,{Q:function(){return u}});var a=s(7437),i=s(2265),l=s(521),r=s(9205);let n=(0,r.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),d=(0,r.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),o=(0,r.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),c=(0,r.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),h=(0,r.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),x=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var g=s(5922);function u(){let e=(0,i.useRef)(null);(0,i.useRef)();let[t,s]=(0,i.useState)([]),[r,u]=(0,i.useState)([]),[m,p]=(0,i.useState)(null),[f,v]=(0,i.useState)(!1),[y,b]=(0,i.useState)(!1),[j,N]=(0,i.useState)("nearest"),[k,w]=(0,i.useState)(!1),[S,M]=(0,i.useState)(100),[I,R]=(0,i.useState)(3),[P,C]=(0,i.useState)(.02),{theme:D}=(0,g.F)();(0,i.useEffect)(()=>{s([{id:"depot",x:400,y:300,demand:0,isDepot:!0,visited:!1}]),u(Array.from({length:I},(e,t)=>({id:"vehicle-".concat(t+1),capacity:S,currentLoad:0,route:["depot"],color:"hsl(".concat(120*t,", 70%, 50%)"),currentPosition:{x:400,y:300},currentRouteIndex:0,isMoving:!1,progress:0})))},[S,I]);let A=a=>{let i,l;if(f)return;let r=e.current;if(!r)return;let n=r.getBoundingClientRect();if("touches"in a){a.preventDefault();let e=a.touches[0]||a.changedTouches[0];i=e.clientX-n.left,l=e.clientY-n.top}else i=a.clientX-n.left,l=a.clientY-n.top;let d=r.width/n.width,o=r.height/n.height;i*=d,l*=o;let c={id:"node-".concat(t.length),x:i,y:l,demand:Math.floor(30*Math.random())+10,isDepot:!1,visited:!1};s(e=>[...e,c])},T=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),z=(e,t)=>{let s=e.filter(e=>!e.isDepot).map(e=>e.id),a=[],i=0;return t.forEach(t=>{let l=["depot"],r=e.find(e=>e.isDepot),n=0;for(;s.length>0;){let a=null,d=1/0;if(s.forEach(s=>{let i=e.find(e=>e.id===s);if(n+i.demand<=t.capacity){let e=T(r,i);e<d&&(d=e,a=i)}}),a)l.push(a.id),n+=a.demand,r=a,s.splice(s.indexOf(a.id),1),i+=d;else break}l.push("depot");let d=T(r,e.find(e=>e.isDepot));i+=d,a.push({vehicleId:t.id,path:l,distance:i})}),{totalDistance:i,vehicles:t,routes:a}},E=(e,t)=>{let s=e.find(e=>e.isDepot),a=e.filter(e=>!e.isDepot),i=[],l=0,r=[];for(let e=0;e<a.length;e++)for(let t=e+1;t<a.length;t++){let i=a[e],l=a[t],n=T(s,i)+T(s,l)-T(i,l);r.push({i:i,j:l,saving:n})}r.sort((e,t)=>t.saving-e.saving),a.map(e=>[s.id,e.id,s.id]),a.map(e=>e.demand);let n=new Set,d=0;for(let{i:e,j:a,saving:o}of r){if(d>=t.length)break;if(!(n.has(e.id)||n.has(a.id))&&e.demand+a.demand<=t[d].capacity){let r=[s.id,e.id,a.id,s.id],o=T(s,e)+T(e,a)+T(a,s);i.push({vehicleId:t[d].id,path:r,distance:o}),l+=o,n.add(e.id),n.add(a.id),d++}}return a.forEach(e=>{if(!n.has(e.id)&&d<t.length){let a=2*T(s,e);i.push({vehicleId:t[d].id,path:[s.id,e.id,s.id],distance:a}),l+=a,d++}}),{totalDistance:l,vehicles:t,routes:i}},V=(e,t)=>{let s=e.find(e=>e.isDepot),a=e.filter(e=>!e.isDepot),i=[],l=0,r=a.map(e=>{let t=Math.atan2(e.y-s.y,e.x-s.x);return{...e,angle:t>=0?t:t+2*Math.PI}});r.sort((e,t)=>e.angle-t.angle);let n=0,d=[s.id],o=0,c=0,h=s;for(let e of r){if(n>=t.length)break;o+e.demand<=t[n].capacity?(d.push(e.id),c+=T(h,e),o+=e.demand,h=e):(d.push(s.id),c+=T(h,s),i.push({vehicleId:t[n].id,path:[...d],distance:c}),l+=c,++n<t.length&&(d=[s.id,e.id],o=e.demand,c=T(s,e),h=e))}return o>0&&n<t.length&&(d.push(s.id),c+=T(h,s),i.push({vehicleId:t[n].id,path:d,distance:c}),l+=c),{totalDistance:l,vehicles:t,routes:i}},Z=e=>{let s=t.find(t=>t.id===e);return s?{x:s.x,y:s.y}:{x:0,y:0}},q=(e,t,s)=>e+(t-e)*s,F=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,L=()=>{m&&y&&u(e=>e.map((e,t)=>{let s=m.routes[t];if(!s||s.path.length<2)return e;let a={...e};if(a.isMoving&&(a.progress+=P,a.progress>=1&&(a.currentRouteIndex++,a.progress=0,a.currentRouteIndex>=s.path.length-1&&(a.currentRouteIndex=0,a.isMoving=!1,a.currentPosition=Z("depot"))),a.isMoving&&a.currentRouteIndex<s.path.length-1)){let e=Z(s.path[a.currentRouteIndex]),t=Z(s.path[a.currentRouteIndex+1]),i=F(a.progress);a.currentPosition={x:q(e.x,t.x,i),y:q(e.y,t.y,i)}}return a}))};return(0,i.useEffect)(()=>{if(y){let e=setInterval(L,16);return()=>clearInterval(e)}},[y,m,P]),(0,i.useEffect)(()=>{let s=e.current;if(!s)return;let a=s.getContext("2d");if(a){a.clearRect(0,0,s.width,s.height),a.strokeStyle="#f0f0f0",a.lineWidth=1;for(let e=0;e<s.width;e+=40)a.beginPath(),a.moveTo(e,0),a.lineTo(e,s.height),a.stroke();for(let e=0;e<s.height;e+=40)a.beginPath(),a.moveTo(0,e),a.lineTo(s.width,e),a.stroke();m&&m.routes.forEach((e,s)=>{if(e.path.length>1){var i;a.strokeStyle=(null===(i=r[s])||void 0===i?void 0:i.color)||"#000",a.lineWidth=3,a.beginPath();for(let s=0;s<e.path.length-1;s++){let i=t.find(t=>t.id===e.path[s]),l=t.find(t=>t.id===e.path[s+1]);i&&l&&(0===s&&a.moveTo(i.x,i.y),a.lineTo(l.x,l.y))}a.stroke()}}),t.forEach(e=>{e.isDepot?(a.fillStyle="#2563eb",a.fillRect(e.x-12,e.y-12,24,24),a.fillStyle="#ffffff",a.font="12px Arial",a.textAlign="center",a.fillText("D",e.x,e.y+4)):(a.fillStyle="#dc2626",a.beginPath(),a.arc(e.x,e.y,8,0,2*Math.PI),a.fill(),a.fillStyle="dark"===D?"#ffffff":"#000000",a.font="10px Arial",a.textAlign="center",a.fillText(e.demand.toString(),e.x,e.y-12))}),m&&y&&r.forEach((e,t)=>{if(e.isMoving||400!==e.currentPosition.x||300!==e.currentPosition.y){var s;let{x:i,y:l}=e.currentPosition;a.fillStyle=e.color,a.strokeStyle="#ffffff",a.lineWidth=2;let r=0;if(e.isMoving&&e.currentRouteIndex<(null===(s=m.routes[t])||void 0===s?void 0:s.path.length)-1){let s=m.routes[t],a=Z(s.path[e.currentRouteIndex]),i=Z(s.path[e.currentRouteIndex+1]);r=Math.atan2(i.y-a.y,i.x-a.x)}a.save(),a.translate(i,l),a.rotate(r),a.beginPath(),a.moveTo(12,0),a.lineTo(-8,-6),a.lineTo(-8,6),a.closePath(),a.fill(),a.stroke(),a.restore(),a.fillStyle="dark"===D?"#ffffff":"#000000",a.font="10px Arial",a.textAlign="center",a.fillText(e.id.split("-")[1],i,l-15)}})}},[t,m,r,y,D]),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-4 sm:p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3",children:[(0,a.jsxs)("button",{onClick:()=>{t.length<2||(v(!0),b(!1),setTimeout(()=>{let e;switch(j){case"nearest":default:e=z(t,r);break;case"savings":e=E(t,r);break;case"sweep":e=V(t,r)}p(e),v(!1)},1500))},disabled:f||t.length<2,className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-sm sm:text-base",children:[f?(0,a.jsx)(n,{size:16}):(0,a.jsx)(d,{size:16}),(0,a.jsx)("span",{className:"hidden xs:inline",children:f?"Solving...":"Solve VRP"}),(0,a.jsx)("span",{className:"xs:hidden",children:f?"...":"Solve"})]}),(0,a.jsxs)("button",{onClick:()=>{s(t.filter(e=>e.isDepot)),p(null),v(!1),b(!1),u(Array.from({length:I},(e,t)=>({id:"vehicle-".concat(t+1),capacity:S,currentLoad:0,route:["depot"],color:"hsl(".concat(120*t,", 70%, 50%)"),currentPosition:{x:400,y:300},currentRouteIndex:0,isMoving:!1,progress:0})))},className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 text-sm sm:text-base",children:[(0,a.jsx)(o,{size:16}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Reset"})]}),m&&(0,a.jsxs)("button",{onClick:()=>{m&&(y?b(!1):(u(e=>e.map((e,t)=>({...e,currentPosition:Z("depot"),currentRouteIndex:0,isMoving:!0,progress:0}))),b(!0)))},disabled:!m,className:"flex items-center gap-2 px-3 sm:px-4 py-2 rounded-lg text-white font-medium transition-colors text-sm sm:text-base ".concat(y?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"," disabled:opacity-50 disabled:cursor-not-allowed"),children:[y?(0,a.jsx)(c,{size:16}):(0,a.jsx)(d,{size:16}),(0,a.jsx)("span",{className:"hidden sm:inline",children:y?"Stop Animation":"Start Animation"}),(0,a.jsx)("span",{className:"sm:hidden hidden xs:inline",children:y?"Stop":"Animate"}),(0,a.jsx)("span",{className:"xs:hidden",children:y?"Stop":"Play"})]}),(0,a.jsxs)("button",{onClick:()=>w(!k),className:"flex items-center gap-2 px-3 sm:px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500 text-sm sm:text-base",children:[(0,a.jsx)(h,{size:16}),(0,a.jsx)("span",{className:"hidden xs:inline",children:"Settings"})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Algorithm:"}),(0,a.jsxs)("select",{value:j,onChange:e=>N(e.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600 text-sm flex-1 sm:flex-none min-w-0",children:[(0,a.jsx)("option",{value:"nearest",children:"Nearest Neighbor"}),(0,a.jsx)("option",{value:"savings",children:"Savings Algorithm"}),(0,a.jsx)("option",{value:"sweep",children:"Sweep Algorithm"})]})]})]}),k&&(0,a.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Capacity"}),(0,a.jsx)("input",{type:"number",value:S,onChange:e=>M(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",min:"50",max:"200"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Number of Vehicles"}),(0,a.jsx)("input",{type:"number",value:I,onChange:e=>R(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",min:"1",max:"5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Animation Speed"}),(0,a.jsx)("input",{type:"range",value:1e3*P,onChange:e=>C(Number(e.target.value)/1e3),className:"w-full",min:"5",max:"50",step:"1"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(1e3*P).toFixed(0),"x speed"]})]})]})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"Network Visualization"}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,a.jsx)(x,{size:16}),"Click to add customer nodes (random demand assigned)"]})]}),(0,a.jsx)("canvas",{ref:e,width:800,height:600,onClick:A,onTouchEnd:A,className:"border border-gray-300 dark:border-gray-600 rounded-lg cursor-crosshair w-full",style:{maxWidth:"100%",height:"auto",touchAction:"manipulation"}})]}),m&&(0,a.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Solution Results"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:m.totalDistance.toFixed(0)}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Distance"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:m.routes.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Vehicles"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.length-1}),(0,a.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customers Served"})]})]}),(0,a.jsx)("div",{className:"space-y-3",children:m.routes.map((e,t)=>{var s;return(0,a.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:null===(s=r[t])||void 0===s?void 0:s.color}}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"font-medium",children:e.vehicleId}),(0,a.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Route: ",e.path.join(" → ")]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:[e.distance.toFixed(0)," units"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Distance"})]})]},e.vehicleId)})})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Legend"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded"}),(0,a.jsx)("span",{children:"Depot (Distribution Center)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-red-600 rounded-full"}),(0,a.jsx)("span",{children:"Customer (demand shown on top)"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-6 h-1 bg-green-500"}),(0,a.jsx)("span",{children:"Vehicle Route"})]})]})]})]})}}}]);