"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{3420:function(e,t,a){a.d(t,{Z:function(){return i}});let i=(0,a(9205).Z)("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]])},1146:function(e,t,a){a.d(t,{Q:function(){return x}});var i=a(7437),s=a(2265),l=a(521),r=a(9205);let d=(0,r.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),n=(0,r.Z)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),o=(0,r.Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),c=(0,r.Z)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),h=(0,r.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),g=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);function x(){let e=(0,s.useRef)(null);(0,s.useRef)();let[t,a]=(0,s.useState)([]),[r,x]=(0,s.useState)([]),[u,p]=(0,s.useState)(null),[m,f]=(0,s.useState)(!1),[v,y]=(0,s.useState)(!1),[b,j]=(0,s.useState)("nearest"),[k,N]=(0,s.useState)(!1),[w,S]=(0,s.useState)(100),[M,I]=(0,s.useState)(3),[R,C]=(0,s.useState)(.02);(0,s.useEffect)(()=>{a([{id:"depot",x:400,y:300,demand:0,isDepot:!0,visited:!1}]),x(Array.from({length:M},(e,t)=>({id:"vehicle-".concat(t+1),capacity:w,currentLoad:0,route:["depot"],color:"hsl(".concat(120*t,", 70%, 50%)"),currentPosition:{x:400,y:300},currentRouteIndex:0,isMoving:!1,progress:0})))},[w,M]);let P=(e,t)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),D=(e,t)=>{let a=e.filter(e=>!e.isDepot).map(e=>e.id),i=[],s=0;return t.forEach(t=>{let l=["depot"],r=e.find(e=>e.isDepot),d=0;for(;a.length>0;){let i=null,n=1/0;if(a.forEach(a=>{let s=e.find(e=>e.id===a);if(d+s.demand<=t.capacity){let e=P(r,s);e<n&&(n=e,i=s)}}),i)l.push(i.id),d+=i.demand,r=i,a.splice(a.indexOf(i.id),1),s+=n;else break}l.push("depot");let n=P(r,e.find(e=>e.isDepot));s+=n,i.push({vehicleId:t.id,path:l,distance:s})}),{totalDistance:s,vehicles:t,routes:i}},z=(e,t)=>{let a=e.find(e=>e.isDepot),i=e.filter(e=>!e.isDepot),s=[],l=0,r=[];for(let e=0;e<i.length;e++)for(let t=e+1;t<i.length;t++){let s=i[e],l=i[t],d=P(a,s)+P(a,l)-P(s,l);r.push({i:s,j:l,saving:d})}r.sort((e,t)=>t.saving-e.saving),i.map(e=>[a.id,e.id,a.id]),i.map(e=>e.demand);let d=new Set,n=0;for(let{i:e,j:i,saving:o}of r){if(n>=t.length)break;if(!(d.has(e.id)||d.has(i.id))&&e.demand+i.demand<=t[n].capacity){let r=[a.id,e.id,i.id,a.id],o=P(a,e)+P(e,i)+P(i,a);s.push({vehicleId:t[n].id,path:r,distance:o}),l+=o,d.add(e.id),d.add(i.id),n++}}return i.forEach(e=>{if(!d.has(e.id)&&n<t.length){let i=2*P(a,e);s.push({vehicleId:t[n].id,path:[a.id,e.id,a.id],distance:i}),l+=i,n++}}),{totalDistance:l,vehicles:t,routes:s}},A=(e,t)=>{let a=e.find(e=>e.isDepot),i=e.filter(e=>!e.isDepot),s=[],l=0,r=i.map(e=>{let t=Math.atan2(e.y-a.y,e.x-a.x);return{...e,angle:t>=0?t:t+2*Math.PI}});r.sort((e,t)=>e.angle-t.angle);let d=0,n=[a.id],o=0,c=0,h=a;for(let e of r){if(d>=t.length)break;o+e.demand<=t[d].capacity?(n.push(e.id),c+=P(h,e),o+=e.demand,h=e):(n.push(a.id),c+=P(h,a),s.push({vehicleId:t[d].id,path:[...n],distance:c}),l+=c,++d<t.length&&(n=[a.id,e.id],o=e.demand,c=P(a,e),h=e))}return o>0&&d<t.length&&(n.push(a.id),c+=P(h,a),s.push({vehicleId:t[d].id,path:n,distance:c}),l+=c),{totalDistance:l,vehicles:t,routes:s}},T=e=>{let a=t.find(t=>t.id===e);return a?{x:a.x,y:a.y}:{x:0,y:0}},E=(e,t,a)=>e+(t-e)*a,V=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,Z=()=>{u&&v&&x(e=>e.map((e,t)=>{let a=u.routes[t];if(!a||a.path.length<2)return e;let i={...e};if(i.isMoving&&(i.progress+=R,i.progress>=1&&(i.currentRouteIndex++,i.progress=0,i.currentRouteIndex>=a.path.length-1&&(i.currentRouteIndex=0,i.isMoving=!1,i.currentPosition=T("depot"))),i.isMoving&&i.currentRouteIndex<a.path.length-1)){let e=T(a.path[i.currentRouteIndex]),t=T(a.path[i.currentRouteIndex+1]),s=V(i.progress);i.currentPosition={x:E(e.x,t.x,s),y:E(e.y,t.y,s)}}return i}))};return(0,s.useEffect)(()=>{if(v){let e=setInterval(Z,16);return()=>clearInterval(e)}},[v,u,R]),(0,s.useEffect)(()=>{let a=e.current;if(!a)return;let i=a.getContext("2d");if(i){i.clearRect(0,0,a.width,a.height),i.strokeStyle="#f0f0f0",i.lineWidth=1;for(let e=0;e<a.width;e+=40)i.beginPath(),i.moveTo(e,0),i.lineTo(e,a.height),i.stroke();for(let e=0;e<a.height;e+=40)i.beginPath(),i.moveTo(0,e),i.lineTo(a.width,e),i.stroke();u&&u.routes.forEach((e,a)=>{if(e.path.length>1){var s;i.strokeStyle=(null===(s=r[a])||void 0===s?void 0:s.color)||"#000",i.lineWidth=3,i.beginPath();for(let a=0;a<e.path.length-1;a++){let s=t.find(t=>t.id===e.path[a]),l=t.find(t=>t.id===e.path[a+1]);s&&l&&(0===a&&i.moveTo(s.x,s.y),i.lineTo(l.x,l.y))}i.stroke()}}),t.forEach(e=>{e.isDepot?(i.fillStyle="#2563eb",i.fillRect(e.x-12,e.y-12,24,24),i.fillStyle="white",i.font="12px Arial",i.textAlign="center",i.fillText("D",e.x,e.y+4)):(i.fillStyle="#dc2626",i.beginPath(),i.arc(e.x,e.y,8,0,2*Math.PI),i.fill(),i.fillStyle="#000",i.font="10px Arial",i.textAlign="center",i.fillText(e.demand.toString(),e.x,e.y-12))}),u&&v&&r.forEach((e,t)=>{if(e.isMoving||400!==e.currentPosition.x||300!==e.currentPosition.y){var a;let{x:s,y:l}=e.currentPosition;i.fillStyle=e.color,i.strokeStyle="#ffffff",i.lineWidth=2;let r=0;if(e.isMoving&&e.currentRouteIndex<(null===(a=u.routes[t])||void 0===a?void 0:a.path.length)-1){let a=u.routes[t],i=T(a.path[e.currentRouteIndex]),s=T(a.path[e.currentRouteIndex+1]);r=Math.atan2(s.y-i.y,s.x-i.x)}i.save(),i.translate(s,l),i.rotate(r),i.beginPath(),i.moveTo(12,0),i.lineTo(-8,-6),i.lineTo(-8,6),i.closePath(),i.fill(),i.stroke(),i.restore(),i.fillStyle="#000",i.font="10px Arial",i.textAlign="center",i.fillText(e.id.split("-")[1],s,l-15)}})}},[t,u,r,v]),(0,i.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mb-6",children:[(0,i.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-4",children:[(0,i.jsxs)("button",{onClick:()=>{t.length<2||(f(!0),y(!1),setTimeout(()=>{let e;switch(b){case"nearest":default:e=D(t,r);break;case"savings":e=z(t,r);break;case"sweep":e=A(t,r)}p(e),f(!1)},1500))},disabled:m||t.length<2,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[m?(0,i.jsx)(d,{size:16}):(0,i.jsx)(n,{size:16}),m?"Solving...":"Solve VRP"]}),(0,i.jsxs)("button",{onClick:()=>{a(t.filter(e=>e.isDepot)),p(null),f(!1),y(!1),x(Array.from({length:M},(e,t)=>({id:"vehicle-".concat(t+1),capacity:w,currentLoad:0,route:["depot"],color:"hsl(".concat(120*t,", 70%, 50%)"),currentPosition:{x:400,y:300},currentRouteIndex:0,isMoving:!1,progress:0})))},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:[(0,i.jsx)(o,{size:16}),"Reset"]}),u&&(0,i.jsxs)("button",{onClick:()=>{u&&(v?y(!1):(x(e=>e.map((e,t)=>({...e,currentPosition:T("depot"),currentRouteIndex:0,isMoving:!0,progress:0}))),y(!0)))},disabled:!u,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium transition-colors ".concat(v?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"," disabled:opacity-50 disabled:cursor-not-allowed"),children:[v?(0,i.jsx)(c,{size:16}):(0,i.jsx)(n,{size:16}),v?"Stop Animation":"Start Animation"]}),(0,i.jsxs)("button",{onClick:()=>N(!k),className:"flex items-center gap-2 px-4 py-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-white rounded-lg hover:bg-gray-400 dark:hover:bg-gray-500",children:[(0,i.jsx)(h,{size:16}),"Settings"]})]}),(0,i.jsx)("div",{className:"flex items-center gap-4",children:(0,i.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",children:[(0,i.jsx)("option",{value:"nearest",children:"Nearest Neighbor"}),(0,i.jsx)("option",{value:"savings",children:"Savings Algorithm"}),(0,i.jsx)("option",{value:"sweep",children:"Sweep Algorithm"})]})})]}),k&&(0,i.jsx)(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-4 pt-4 border-t",children:(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Vehicle Capacity"}),(0,i.jsx)("input",{type:"number",value:w,onChange:e=>S(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",min:"50",max:"200"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Number of Vehicles"}),(0,i.jsx)("input",{type:"number",value:M,onChange:e=>I(Number(e.target.value)),className:"w-full px-3 py-2 border rounded-lg dark:bg-gray-700 dark:border-gray-600",min:"1",max:"5"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Animation Speed"}),(0,i.jsx)("input",{type:"range",value:1e3*R,onChange:e=>C(Number(e.target.value)/1e3),className:"w-full",min:"5",max:"50",step:"1"}),(0,i.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[(1e3*R).toFixed(0),"x speed"]})]})]})})]}),(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold",children:"Network Visualization"}),(0,i.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[(0,i.jsx)(g,{size:16}),"Click to add customer nodes"]})]}),(0,i.jsx)("canvas",{ref:e,width:800,height:600,onClick:i=>{if(m)return;let s=e.current;if(!s)return;let l=s.getBoundingClientRect(),r=i.clientX-l.left,d=i.clientY-l.top,n={id:"node-".concat(t.length),x:r,y:d,demand:Math.floor(30*Math.random())+10,isDepot:!1,visited:!1};a(e=>[...e,n])},className:"border border-gray-300 dark:border-gray-600 rounded-lg cursor-crosshair",style:{maxWidth:"100%",height:"auto"}})]}),u&&(0,i.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Solution Results"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,i.jsxs)("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:u.totalDistance.toFixed(0)}),(0,i.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Distance"})]}),(0,i.jsxs)("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-green-600",children:u.routes.length}),(0,i.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Active Vehicles"})]}),(0,i.jsxs)("div",{className:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[(0,i.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:t.length-1}),(0,i.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Customers Served"})]})]}),(0,i.jsx)("div",{className:"space-y-3",children:u.routes.map((e,t)=>{var a;return(0,i.jsxs)("div",{className:"flex items-center gap-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,i.jsx)("div",{className:"w-4 h-4 rounded",style:{backgroundColor:null===(a=r[t])||void 0===a?void 0:a.color}}),(0,i.jsxs)("div",{className:"flex-1",children:[(0,i.jsx)("div",{className:"font-medium",children:e.vehicleId}),(0,i.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Route: ",e.path.join(" â†’ ")]})]}),(0,i.jsxs)("div",{className:"text-right",children:[(0,i.jsxs)("div",{className:"font-medium",children:[e.distance.toFixed(0)," units"]}),(0,i.jsx)("div",{className:"text-xs text-gray-500",children:"Distance"})]})]},e.vehicleId)})})]}),(0,i.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6 mt-6",children:[(0,i.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Legend"}),(0,i.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-blue-600 rounded"}),(0,i.jsx)("span",{children:"Depot (Distribution Center)"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 bg-red-600 rounded-full"}),(0,i.jsx)("span",{children:"Customer (with demand)"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("div",{className:"w-6 h-1 bg-green-500"}),(0,i.jsx)("span",{children:"Vehicle Route"})]})]})]})]})}}}]);