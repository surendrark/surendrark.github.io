"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{5461:function(e,r,t){t.r(r),t.d(r,{default:function(){return n}});var o=t(7437),a=t(2265);function n(e){let{flights:r}=e,t=(0,a.useRef)(null),n=(0,a.useRef)(null),[i,c]=(0,a.useState)(!0),[s,l]=(0,a.useState)(!1),u=function(e,r){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,[o,a]=e,[n,i]=r,c=e=>180/Math.PI*e,s=Math.PI/180*a,l=Math.PI/180*o,u=Math.PI/180*i,d=Math.PI/180*n,h=Math.acos(Math.sin(s)*Math.sin(u)+Math.cos(s)*Math.cos(u)*Math.cos(d-l)),p=[];for(let o=0;o<=t;o++){let a=o/t;if(0===a){p.push(e);continue}if(1===a){p.push(r);continue}let n=Math.sin((1-a)*h)/Math.sin(h),i=Math.sin(a*h)/Math.sin(h),f=n*Math.cos(s)*Math.cos(l)+i*Math.cos(u)*Math.cos(d),m=n*Math.cos(s)*Math.sin(l)+i*Math.cos(u)*Math.sin(d),g=c(Math.atan2(n*Math.sin(s)+i*Math.sin(u),Math.sqrt(f*f+m*m))),y=c(Math.atan2(m,f));p.push([y,g])}return p},d={DXB:[55.3657,25.2532],BOM:[72.8656,19.0896],DEL:[77.1,28.5562],FRA:[8.5622,50.0379],LHR:[-.4543,51.47],CDG:[2.5479,49.0097],JFK:[-73.7781,40.6413],LAX:[-118.4081,33.9425],SFO:[-122.379,37.6213],NRT:[140.3929,35.772],SIN:[103.9915,1.3644],HKG:[113.9185,22.308],SYD:[151.1753,-33.9399],MEL:[144.841,-37.669],DUS:[6.7668,51.2895],MUC:[11.7861,48.3538],AMS:[4.7683,52.3105],ZUR:[8.5492,47.4647],VIE:[16.5697,48.1103],MAA:[80.1693,12.9941],BLR:[77.7063,12.9716],HYD:[78.4294,17.2403],CCU:[88.4467,22.6547],BBI:[85.8167,20.2542],GAU:[91.5857,26.1061],TIR:[79.5499,13.6325],CDP:[78.7733,14.5167],IDR:[75.8081,22.7211],IXL:[77.5463,34.1336],DED:[78.1803,30.1894],PRG:[14.2632,50.1008],DOH:[51.6089,25.2741],CMB:[79.8841,6.8282],KUL:[101.7097,2.7456],CNS:[145.7781,-16.8736],BNE:[153.1178,-27.3842],ORD:[-87.9048,41.9786],ATL:[-84.4281,33.6367],IAD:[-77.4565,38.9531],BOS:[-71.0096,42.3656],SEA:[-122.3088,47.4502],ANC:[-149.9963,61.1743],LAS:[-115.1537,36.0864],PHX:[-112.0158,33.4342],MSP:[-93.2218,44.8848],DFW:[-97.0403,32.8998],STL:[-90.3755,38.7487],DSM:[-93.6631,41.5339],MDW:[-87.7524,41.7868],DCA:[-77.0378,38.8512],BNA:[-86.6781,36.1245],IND:[-86.2944,39.7173],TLH:[-84.3503,30.3965],JAX:[-81.6878,30.4941],EWR:[-74.1745,40.6895],AUS:[-97.6699,30.1975],OSL:[11.1004,59.9138],BER:[13.5007,52.3667],TOS:[18.9189,69.6833],ZAD:[15.3467,44.1089],STR:[9.2215,48.6898],FKB:[8.0805,48.7794],BIO:[-2.9106,43.3011],MAD:[-3.5676,40.4719],DRS:[13.7671,51.1328]};(0,a.useEffect)(()=>{if(!n.current&&t.current)return(async()=>{try{if(!window.mapboxgl&&(await new Promise((e,r)=>{let t=document.createElement("script");t.src="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.js",t.onload=e,t.onerror=r,document.head.appendChild(t)}),!document.querySelector('link[href*="mapbox-gl.css"]'))){let e=document.createElement("link");e.href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css",e.rel="stylesheet",document.head.appendChild(e)}window.mapboxgl.accessToken="pk.eyJ1Ijoic3VyZW5kcmFyayIsImEiOiJja20xMm5oYTIwNDVuMnZwaTRmenlkMWVhIn0.IEP9jryaKL3Lxk_MQe4Rbg",n.current=new window.mapboxgl.Map({container:t.current,style:"mapbox://styles/mapbox/streets-v11",center:[50,50],zoom:1.5,bearing:-20,projection:{name:"globe"}}),n.current.on("load",()=>{n.current.setFog({"horizon-blend":.02,color:"#ffffff","high-color":"#245cdf","space-color":"#000000","star-intensity":.6}),l(!0)})}catch(e){console.error("Error initializing map:",e)}})(),()=>{n.current&&(n.current.remove(),n.current=null)}},[]),(0,a.useEffect)(()=>{n.current&&s&&0!==r.length&&(()=>{n.current.getSource("routes")&&(n.current.removeLayer("routes"),n.current.removeSource("routes")),n.current.getSource("airports")&&(n.current.removeLayer("airport-labels"),n.current.removeLayer("airports"),n.current.removeSource("airports"));let e=r.filter(e=>d[e.dep_airport]&&d[e.arr_airport]).map(e=>({type:"Feature",geometry:{type:"LineString",coordinates:u(d[e.dep_airport],d[e.arr_airport])},properties:{airline:e.airline,flight_number:e.flight_number,aircraft:e.aircraft_type}}));e.length>0&&(n.current.addSource("routes",{type:"geojson",data:{type:"FeatureCollection",features:e}}),n.current.addLayer({id:"routes",type:"line",source:"routes",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#ff6b6b","line-width":2,"line-opacity":.7}}));let t=new Set;r.forEach(e=>{d[e.dep_airport]&&t.add(e.dep_airport),d[e.arr_airport]&&t.add(e.arr_airport)});let o=Array.from(t).map(e=>({type:"Feature",geometry:{type:"Point",coordinates:d[e]},properties:{code:e}}));o.length>0&&(n.current.addSource("airports",{type:"geojson",data:{type:"FeatureCollection",features:o}}),n.current.addLayer({id:"airports",type:"circle",source:"airports",paint:{"circle-radius":4,"circle-color":"#007cbf","circle-stroke-width":2,"circle-stroke-color":"#ffffff"}}),n.current.addLayer({id:"airport-labels",type:"symbol",source:"airports",layout:{"text-field":["get","code"],"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":11,"text-anchor":"bottom","text-offset":[0,-1]},paint:{"text-color":"#333333","text-halo-color":"#ffffff","text-halo-width":1}}))})()},[r,s]);let h=async()=>{if(n.current)try{i?(await n.current.easeTo({pitch:0,bearing:0,zoom:1.5,duration:750}),n.current.setProjection({name:"mercator"}),await n.current.easeTo({zoom:1,bearing:0,center:[0,35],duration:1e3}),n.current.setFog(null)):(await n.current.easeTo({pitch:0,bearing:0,zoom:1.25,duration:750}),n.current.setProjection({name:"globe"}),await n.current.easeTo({bearing:-20,zoom:1.5,center:[50,50],duration:1500}),n.current.setFog({"horizon-blend":.02,color:"#ffffff","high-color":"#245cdf","space-color":"#000000","star-intensity":.6})),c(!i)}catch(e){console.error("Error toggling view:",e)}};return(0,o.jsxs)("div",{className:"relative w-full h-[600px] bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden",children:[(0,o.jsx)("div",{ref:t,className:"w-full h-full"}),(0,o.jsx)("div",{className:"absolute top-3 right-3 z-10",children:(0,o.jsx)("button",{onClick:h,className:"bg-white dark:bg-gray-800 text-2xl p-2 rounded-lg shadow-md hover:shadow-lg transition-shadow border border-gray-200 dark:border-gray-600 flex items-center justify-center min-w-[44px] h-[44px]",title:i?"Switch to 2D":"Switch to 3D",children:i?"\uD83D\uDDFAÔ∏è":"\uD83C\uDF0F"})}),!s&&(0,o.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-700",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),(0,o.jsx)("div",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Loading flight map..."})]})})]})}}}]);